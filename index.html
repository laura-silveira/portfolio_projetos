<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hub de Conhecimento</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üß†</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* Fundo escuro padr√£o */
            color: #d1d5db; /* Texto claro padr√£o */
        }
        .feed-card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
            border: 1px solid #374151;
        }
        .feed-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.2), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
        }
        .loader {
            border: 4px solid #4b5563;
            border-top: 4px solid #3b82f6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-300">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-white">Seu Hub de Conhecimento</h1>
            <p class="text-lg text-gray-400 mt-2">Conte√∫do selecionado para o seu desenvolvimento.</p>
            <p id="last-updated" class="text-sm text-gray-500 mt-2"></p>
        </header>

        <main class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
            
            <div class="feed-column">
                <h2 class="text-2xl font-semibold mb-4 text-white border-b-2 border-blue-500 pb-2">Atualidades</h2>
                <div id="feed-atualidades" class="space-y-4">
                    <div class="flex justify-center items-center h-40"><div class="loader"></div></div>
                </div>
            </div>
            
            <div class="feed-column">
                <h2 class="text-2xl font-semibold mb-4 text-white border-b-2 border-purple-500 pb-2">Tecnoblog</h2>
                <div id="feed-tecnoblog" class="space-y-4">
                    <div class="flex justify-center items-center h-40"><div class="loader"></div></div>
                </div>
            </div>
            
            <div class="feed-column">
                <h2 class="text-2xl font-semibold mb-4 text-white border-b-2 border-yellow-500 pb-2">Inova√ß√£o em RH</h2>
                <div id="feed-inovacao" class="space-y-4">
                    <div class="flex justify-center items-center h-40"><div class="loader"></div></div>
                </div>
            </div>

            <div class="feed-column">
                <h2 class="text-2xl font-semibold mb-4 text-white border-b-2 border-green-500 pb-2">S√≥lides Blog</h2>
                <div id="feed-rh" class="space-y-4">
                    <div class="flex justify-center items-center h-40"><div class="loader"></div></div>
                </div>
            </div>

            <div class="feed-column">
                <h2 class="text-2xl font-semibold mb-4 text-white border-b-2 border-green-500 pb-2">RH Portal</h2>
                <div id="feed-rhportal" class="space-y-4">
                    <div class="flex justify-center items-center h-40"><div class="loader"></div></div>
                </div>
            </div>

            <div class="feed-column">
                <h2 class="text-2xl font-semibold mb-4 text-white border-b-2 border-green-500 pb-2">Voc√™ RH</h2>
                <div id="feed-vocerh" class="space-y-4">
                    <div class="flex justify-center items-center h-40"><div class="loader"></div></div>
                </div>
            </div>

            <div class="feed-column">
                <h2 class="text-2xl font-semibold mb-4 text-white border-b-2 border-green-500 pb-2">Feedz Blog</h2>
                <div id="feed-feedz" class="space-y-4">
                    <div class="flex justify-center items-center h-40"><div class="loader"></div></div>
                </div>
            </div>

        </main>
        
        <footer class="text-center mt-12 py-4 border-t border-gray-700">
            <p class="text-gray-500">Hub de Conhecimento Pessoal &copy; 2024</p>
        </footer>
    </div>

    <script>
        // Objeto de configura√ß√£o dos feeds, agrupados por coluna
        const feedColumns = {
            'feed-atualidades': [
                { url: 'https://feeds.folha.uol.com.br/fsp/principal/rss091.xml', source: 'Folha de S.Paulo' },
                { url: 'https://g1.globo.com/rss/g1/', source: 'G1' },
                { url: 'https://www.estadao.com.br/rss/ultimas.xml', source: 'Estad√£o' }
            ],
            'feed-tecnoblog': [
                { url: 'https://tecnoblog.net/feed/', source: 'Tecnoblog' }
            ],
            'feed-inovacao': [
                { url: 'https://mittechreview.com.br/feed/', source: 'MIT Tech Review' }
            ],
            'feed-rh': [
                { url: 'https://www.solides.com.br/blog/feed/', source: 'S√≥lides Blog' }
            ],
            'feed-rhportal': [
                { url: 'https://www.rhportal.com.br/feed/', source: 'RH Portal' }
            ],
            'feed-vocerh': [
                { url: 'https://vocerh.abril.com.br/feed/', source: 'Voc√™ RH' }
            ],
             'feed-feedz': [
                { url: 'https://www.feedz.com.br/blog/feed/', source: 'Feedz Blog' }
            ]
        };

        const formatDate = (dateString) => {
            const date = new Date(dateString);
            if (isNaN(date)) return '';
            return date.toLocaleString('pt-BR', {
                day: '2-digit', month: '2-digit', year: 'numeric',
                hour: '2-digit', minute: '2-digit'
            });
        };

        /**
         * Busca v√°rios feeds, combina, ordena e exibe os itens em um container.
         * @param {string} containerId - O ID do elemento HTML onde o feed ser√° exibido.
         * @param {Array<object>} feeds - Um array com as configura√ß√µes dos feeds.
         */
        const fetchAndDisplayFeeds = async (containerId, feeds) => {
            const container = document.getElementById(containerId);
            if (!container) return;

            try {
                // 1. Busca todos os feeds em paralelo para mais velocidade
                const responses = await Promise.all(
                    feeds.map(feed => fetch(`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(feed.url)}`))
                );

                const dataPromises = responses.map(res => res.ok ? res.json() : Promise.resolve(null));
                const results = await Promise.all(dataPromises);

                // 2. Combina os itens de todos os feeds e adiciona a fonte a cada item
                const allItems = results.flatMap((data, index) => {
                    if (data && data.items) {
                        return data.items.map(item => ({ ...item, source: feeds[index].source }));
                    }
                    return [];
                });
                
                // 3. Ordena todos os itens por data de publica√ß√£o (do mais novo para o mais antigo)
                allItems.sort((a, b) => new Date(b.pubDate) - new Date(a.pubDate));
                
                // 4. Renderiza os itens na tela
                container.innerHTML = ''; // Limpa o loader
                
                if (allItems.length === 0) {
                     container.innerHTML = `<p class="text-yellow-400">Nenhum item encontrado para esta categoria.</p>`;
                     return;
                }

                allItems.slice(0, 5).forEach(item => { // Limita a 5 itens no total
                    const card = `
                        <a href="${item.link}" target="_blank" rel="noopener noreferrer" class="block p-4 bg-gray-800 rounded-lg feed-card hover:bg-gray-700">
                            <h3 class="font-bold text-md text-white">${item.title}</h3>
                            <p class="text-sm text-gray-400 mt-2">${formatDate(item.pubDate)}</p>
                            <div class="text-xs text-blue-400 font-semibold mt-3 uppercase">${item.source}</div>
                        </a>
                    `;
                    container.innerHTML += card;
                });

            } catch (error) {
                console.error(`Erro ao buscar feeds para '${containerId}':`, error);
                container.innerHTML = `<p class="text-red-400">N√£o foi poss√≠vel carregar este feed.</p>`;
            }
        };

        const loadAllFeeds = () => {
            for (const containerId in feedColumns) {
                fetchAndDisplayFeeds(containerId, feedColumns[containerId]);
            }
            const lastUpdatedElement = document.getElementById('last-updated');
            if(lastUpdatedElement) {
                lastUpdatedElement.textContent = `Atualizado em: ${new Date().toLocaleString('pt-BR')}`;
            }
        };

        document.addEventListener('DOMContentLoaded', loadAllFeeds);
    </script>
</body>
</html>
